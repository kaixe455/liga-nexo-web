---
import LeaderBoardRow from './LeaderBoardRow.astro'

const response = await fetch('https://liga-nexo-api.liga-nexo.workers.dev/leaderboard')
const leaderboard = await response.json()
console.log(leaderboard)
---

<div class='relative overflow-x-auto sm:rounded-lg'>
	<table class='w-full text-xs text-left text-black'>
		<thead class='font-black text-white uppercase bg-[#7541e4]'>
			<tr>
				<th scope='col' class='px-6 py-3 text-center'> Posicion</th>
				<th scope='col' class='px-6 py-3 text-center'> Equipo</th>
				<th scope='col' class='px-6 py-3 text-center'> Jugados</th>
				<th scope='col' class='px-6 py-3 text-center'> Puntos</th>
				<th scope='col' class='px-6 py-3 text-center'> Resultados</th>
			</tr>
		</thead>
		<tbody>
			{
				leaderboard.map(({ name, played_matches, points, rank, results, logo }, index) => {
					return (
						<tr class={'odd:bg-white even:bg-slate-100 border-b text-base hover:bg-slate-300'}>
							<th
								scope='row'
								class='text-center px-3 py-4 font-black text-black whitespace-nowrap relative'
							>
								{rank}
							</th>
							<td class='px-6 py-4 font-black text-center'>
								<a
									class='flex items-center gap-x-4 transition hover:opacity-75'
									href={`/team/${name}`}
									rel='preload'
								>
									<img
										src='https://liga-nexo-api.liga-nexo.workers.dev/static/logos/oxygen-valiants.svg'
										alt={'Logo de ' + name}
										class='w-6 h-6'
										decoding='async'
										fetchpriority='high'
									/>
									<span class='hidden md:block'>{name}</span>
								</a>
							</td>
							<td class='px-4 py-4 font-bold text-center'>{played_matches}</td>
							<td class='px-4 py-4 text-center'>{points}</td>
							<td class='px-4 py-4 font-bold text-center'>{results}</td>
						</tr>
					)
				})
			}
		</tbody>
	</table>
</div>
